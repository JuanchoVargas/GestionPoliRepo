function formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")}function CleanText(e){var t=$(e.replaceAll("<p><br></p>","").replaceAll("<br></p>","</p>").replaceAll(' style=""',"").replaceAll("\r\n","").replaceAll(_bp,"/"));return t.find("*").removeAttr("style").removeAttr("id").removeAttr("class"),t.outerHtml()}function Copy(e,t){if("object"===type.of(e)){if("object"===type.of(t)){for(var n in t)e.hasOwnProperty(n)&&(t[n]=e[n]);return Clone(t)}console.warn("Copy(from, to) -> El parámetro 'to' no es un objeto")}else console.warn("Copy(from, to) -> El parámetro 'from' no es un objeto")}function Clone(e){if("array"===type.of(e)){var t=[];return window.jQuery.each(e,function(e,n){t.push(Clone(n))}),t}if("object"===type.of(e)){var n=window.jQuery.extend(!0,{},e);for(var o in n)n.hasOwnProperty(o)&&o.toString().contains("$")&&delete n[o];return n}}function getAmPm(e){return"number"!==type.of(e)&&(e=parseInt(e)),0===e||24===e?"12am":12===e?"12pm":e>12?(e-=12,e+"pm"):e+"am"}function WelcomeMail(e,t){$.ajax({data:e,url:window._p+"/admin/WelcomeMail",success:Call(t)})}function Call(e){var t=arguments.length>1?Array.prototype.slice.call(arguments,1):null;return void 0===e?t:"function"==typeof e?e.apply(this,t):"string"==typeof e&&e.length>0?window[e].apply(this,t):t}function urlParam(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}function getDTParams(e,t,n){var o={},i=0;for(var r in o.iSortCol_0=0,e)o["mDataProp_"+i]=r.toString(),o["bSearchable_"+i]=t===r.toString(),o["bSortable_"+i]=t===r.toString(),t===r.toString()&&(o.iSortCol_0=i),i++;return void 0!==n&&(o.sSearch=n),o.iDisplayLength=1e9,o.iColumns=i,o.iDisplayStart=0,o.sSortDir_0="asc",o.iSortingCols=1,o.sEcho=6,o}function getScriptParam(e){var t=document.getElementsByTagName("script"),n=t[t.length-1].src;return unescape(n).split(e+"=")[1].split("&")[0]}function dtDrawCB(e){console.log("dtDrawCB!");var t=$(e.nTableWrapper);e._iRecordsTotal>0?(console.log("DTL: "+t.find(".dataTables_length select").length),t.find("thead tr"),t.find("tbody tr").slice(-3).find(".dropdown, .btn-group").addClass("dropup"),t.find(".dataTables_filter input[type=search]").attr("placeholder","Presione 'ENTER'..."),t.find("div.dataTables_length:first").show(),t.find(".dataTables_filter input").unbind().bind("keyup",function(e){var t=$(this).parents("div.dataTables_wrapper:first").find("table.dataTable:first").dataTable().api();this.value.length>=3&&13===e.keyCode?(console.log(this.value),t.search(this.value).draw()):this.value.length<=0&&t.search("").draw()})):t.find("div.dataTables_length:first").hide()}function FormatInit(){$("input.text-uppercase").blur(function(){$(this).val.length>0&&$(this).val($(this).val().trim().toUpperCase().replace(/\s\s+/g," "))}),$("input.text-lowercase").blur(function(){$(this).val.length>0&&$(this).val($(this).val().trim().toLowerCase().replace(/\s\s+/g," "))}),$("input.text-capitalize").blur(function(){$(this).val.length>0&&$(this).val($(this).val().trim().capitalizeAll().replace(/\s\s+/g," "))})}function setSelect2(){$("select.select2").each(function(e){var t=$(this);console.log("el =>",t);var n=t.hasClass("searchable")?3:-1;t.select2({language:"es",allowClear:t.hasClass("clearable"),placeholder:"Seleccione...",minimumResultsForSearch:n}).on("select2:select",function(e){var t=e.params;console.log(t);var n=$(e.currentTarget);n.next().removeClass("error");var o=n.val();console.log(o),n.parent().find("label.error:first").remove()})})}function setTooltips(e="blue-tooltip"){var t=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));console.log("tooltipTriggerList =>",t),t.map(function(t){return new bootstrap.Tooltip(t,{customClass:e})})}function setHelp(e="blue-tooltip",t=2e3){setTimeout(function(){var t=[].slice.call(document.querySelectorAll("label.help"));console.log("tooltipTriggerList =>",t),t.map(function(t){return new bootstrap.Tooltip(t,{customClass:e,html:!0})})},t)}window._usr=null,window._conf=null,window._debug=!0,window._sep="--------------------------------------------------\n",window._cnf={Environment:window._env};let rdnBetween=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),parseJwt=function(e){var t=e.split(".")[1],n=t.replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(atob(n).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)};var gaugePercent=function(e){var t=e.find(".nmd-percent");if(0===t.length){var n=e.data("porcentaje");void 0!==n&&void 0!==n.color&&void 0!==n.avance&&(n.color="#333333",t=$("<span class='nmd-percent slide "+n.align+"' style='color:"+n.color+"'>"+n.avance.toString().replace(".",",")+"</span>"),e.prepend(t),setTimeout(function(){var n=e.find(".dxbg-bar-gauge");if(n.length>0){var o=n.width(),i=(n.position(),n.offset().left-e.offset().left);t.css({width:o+"px",left:i+"px"}),t.fadeIn(1e3,function(){})}},500))}},gaugeOptions={color:"#cccccc",size:{height:160,width:120},backgroundColor:"#eeeeee",animation:{duration:3e3},baseValue:0,startValue:0,endValue:100,values:[47.27],margin:{top:0,bottom:0,left:0,right:0},barSpacing:0,geometry:{startAngle:90,endAngle:90},palette:[],theme:"none",export:{enabled:!1},relativeInnerRadius:.75,onDrawn:function(e){gaugePercent(e.element)},label:{connectorColor:null,connectorWidth:0,customizeText:function(e){return e.valueText+"%"},font:{color:"red",family:"Work Sans",opacity:1,size:16,weight:400},format:null,indent:20,precision:null,visible:!1},title:{text:null,horizontalAlignment:"center",verticalAlignment:"bottom",font:{size:14,weight:600,family:"Work Sans",color:"#333"},margin:{top:10},subtitle:{text:null,horizontalAlignment:"center",verticalAlignment:"bottom",font:{size:15,weight:400,family:"Work Sans",color:"#333"},margin:{top:25}}}};"Production"===window._cnf.Environment&&(window.console.log=function(){},window.console.info=function(){},window.console.clear=function(){},window.console.warn=function(){});const pSBC=(e,t,n,o)=>{let i,r,a,l,s,c,d,u=parseInt,p=Math.round,f="string"==typeof n;return"number"!=typeof e||e<-1||e>1||"string"!=typeof t||"r"!=t[0]&&"#"!=t[0]||n&&!f?null:(this.pSBCr||(this.pSBCr=(e=>{let t=e.length,n={};if(t>9){if([i,r,a,f]=e=e.split(","),t=e.length,t<3||t>4)return null;n.r=u("a"==i[3]?i.slice(5):i.slice(4)),n.g=u(r),n.b=u(a),n.a=f?parseFloat(f):-1}else{if(8==t||6==t||t<4)return null;t<6&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(t>4?e[4]+e[4]:"")),e=u(e.slice(1),16),9==t||5==t?(n.r=e>>24&255,n.g=e>>16&255,n.b=e>>8&255,n.a=p((255&e)/.255)/1e3):(n.r=e>>16,n.g=e>>8&255,n.b=255&e,n.a=-1)}return n})),d=t.length>9,d=f?n.length>9||"c"==n&&!d:d,s=pSBCr(t),l=e<0,c=n&&"c"!=n?pSBCr(n):l?{r:0,g:0,b:0,a:-1}:{r:255,g:255,b:255,a:-1},e=l?-1*e:e,l=1-e,s&&c?(o?(i=p(l*s.r+e*c.r),r=p(l*s.g+e*c.g),a=p(l*s.b+e*c.b)):(i=p((l*s.r**2+e*c.r**2)**.5),r=p((l*s.g**2+e*c.g**2)**.5),a=p((l*s.b**2+e*c.b**2)**.5)),f=s.a,c=c.a,s=f>=0||c>=0,f=s?f<0?c:c<0?f:f*l+c*e:0,d?"rgb"+(s?"a(":"(")+i+","+r+","+a+(s?","+p(1e3*f)/1e3:"")+")":"#"+(4294967296+16777216*i+65536*r+256*a+(s?p(255*f):0)).toString(16).slice(1,s?void 0:-2)):null)};CSSStyleSheet.prototype.getClass=function(e){var t=this;if(null!==t)for(var n=0;n<t.cssRules.length;n++){var o=t.cssRules[n].selectorText;if(o.indexOf(e)>-1)return t.cssRules[n].style}return null};var style={contains:function(e,t){return e.length>0&&e.indexOf(t)>-1},get:function(e){for(var t=0;t<document.styleSheets.length;t++)if(this.contains(document.styleSheets[t].href.toLowerCase(),e))return document.styleSheets[t];return null},getClass:function(e,t){var n=this.get(e);if(null!==n)for(var o=0;o<n.cssRules.length;o++){var i=n.cssRules[o];if(this.contains(i.selectorText,t))return i}return null}};Array.prototype.removeLast=function(){return this.pop()},Array.prototype.removeByIndex=function(e,t){var n=this.slice((t||e)+1||this.length);return this.length=e<0?this.length+e:e,this.push.apply(this,n)},Array.prototype.getIndex=function(e){for(var t=this,n=0;n<t.length;n++)if(t[n]===e)return n;return-1},Array.prototype.remove=function(){for(var e,t,n=arguments,o=n.length;o&&this.length;)for(e=n[--o];-1!==(t=this.indexOf(e));)this.splice(t,1);return console.log("Array.prototype.remove: "+JSON.stringify(this)),this},Array.prototype.contains=function(e){for(var t=this,n=0;n<t.length;n++)if(t[n]===e)return!0;return!1},Array.prototype.sortBy=function(e){var t=this;return t.sort(function(t,n){var o=t[e],i=n[e];return o<i?-1:o>i?1:0})},Array.prototype.add=function(e){return this.contains(e)||this.push(e),e},String.prototype.trim||function(){var e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(e,"")}}(),String.prototype.padLeft=function(e,t){for(var n=this;n.length<e;)n=t+n;return n},String.prototype.contains=function(e){return this.length>0&&this.indexOf(e)>-1},String.prototype.reverse=function(){return this.split("").reverse().join("")},String.prototype.capitalize=function(){return this.substring(0,1).toUpperCase()+this.substring(1).toLowerCase()},String.prototype.dateFromJson=function(){if(null!==this){var e=/\/Date\((\d*)\)\//.exec(this);return e?new Date(+e[1]):null}return null},Date.prototype.dateFromJson=function(){return this},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},String.prototype.capitalizeAll=function(){var e=this.toLowerCase(),t=e.length;if(t>0)for(var n=0;n<t;n++){var o,i;if(0===n)o=e.substring(0,1).toUpperCase(),i=e.substring(1,t),e=o+i;else if(o=e.substring(n,n+1)," "===o&&n<t-1){o=e.substring(n+1,n+2).toUpperCase();var r=e.substring(0,n+1);i=e.substring(n+2,t),e=r+o+i}}return e},String.prototype.getExtension=function(){var e=/(?:\.([^.]+))?$/;return e.exec(this.toLowerCase())[1]},String.prototype.getIcon=function(){var e=this.getExtension();return e="jpeg"===e||"jpg"===e||"bmp"===e||"gif"===e||"png"===e?"picture":"mp3"===e||"ogg"===e||"wav"===e?"music":"pdf"===e?"pdf":"text2","icon-file-"+e},String.prototype.e64=function(){var e,t,n,o,i,r,a,l,s=this,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,u=0,p="",f=[];if(!s)return s;do{e=s.charCodeAt(d++),t=s.charCodeAt(d++),n=s.charCodeAt(d++),l=e<<16|t<<8|n,o=l>>18&63,i=l>>12&63,r=l>>6&63,a=63&l,f[u++]=c.charAt(o)+c.charAt(i)+c.charAt(r)+c.charAt(a)}while(d<s.length);p=f.join("");var h=s.length%3;return(h?p.slice(0,h-3):p)+"===".slice(h||3)},String.prototype.d64=function(){var e,t,n,o,i,r,a,l,s=this,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,u=0,p="",f=[];if(!s)return s;s+="";do{o=c.indexOf(s.charAt(d++)),i=c.indexOf(s.charAt(d++)),r=c.indexOf(s.charAt(d++)),a=c.indexOf(s.charAt(d++)),l=o<<18|i<<12|r<<6|a,e=l>>16&255,t=l>>8&255,n=255&l,f[u++]=64===r?String.fromCharCode(e):64===a?String.fromCharCode(e,t):String.fromCharCode(e,t,n)}while(d<s.length);return p=f.join(""),p},String.prototype.dc=function(){return this.d64().d64().reverse()},String.prototype.delRight=function(e){return this.substring(0,this.length-e)},String.prototype.delLeft=function(e){return this.substring(e)},String.prototype.between=function(e,t){return this.match(e+"(.*)"+t)[1]},String.prototype.decodeHtml=function(){var e=document.createElement("textarea");return e.innerHTML=this,e.value},String.prototype.unwrap=function(e,t){var n=document.createElement("div");n.innerHTML=this;var o=n.firstChild,i=o.getElementsByTagName(e),r=i.length;console.log("length:"+r);for(var a=r-1;a>=0;a--){for(;i[a].firstChild;)i[a].parentNode.insertBefore(i[a].firstChild,i[a]);t&&t(i[a]),i[a].parentNode.removeChild(i[a])}return o.innerHTML},Number.prototype.format=function(e,t,n){var o=this;o=(o+"").replace(/[^0-9+-Ee.]/g,"");var i=isFinite(+o)?+o:0,r=isFinite(+e)?Math.abs(e):0,a=void 0===n?".":n,l=void 0===t?",":t,s="",c=function(e,t){var n=Math.pow(10,t);return""+Math.round(e*n)/n};return s=(r?c(i,r):""+Math.round(i)).split("."),s[0].length>3&&(s[0]=s[0].replace(/B(?=(?:d{3})+(?!d))/g,a)),(s[1]||"").length<r&&(s[1]=s[1]||"",s[1]+=new Array(r-s[1].length+1).join("0")),s.join(l)},Number.prototype.sizeFormat=function(){var e=parseInt(this);return e=e>=1073741824?(e/1073741824).format(2,",",".")+" GB":e>=1048576?(e/1048576).format(2,",",".")+" MB":e>=1024?(e/1024).format(0)+" KB":e.format(0)+" Bytes",e.replaceAll(",00","")},Date.prototype.getFormatted=function(e){e=this;var t=e.getDate(),n=e.getMonth()+1,o=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),t+"/"+n+"/"+o},Object.defineProperty(Date.prototype,"TS",{value:function(){function e(e){return(e<10?"0":"")+e}return this.getFullYear()+e(this.getMonth()+1)+e(this.getDate())+e(this.getHours())+e(this.getMinutes())+e(this.getSeconds())}}),Date.locale={dayNames:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],abbreviatedDayNames:["dom","lun","mar","mié","jue","vie","sáb"],shortestDayNames:["do","lu","ma","mi","ju","vi","sá"],firstLetterDayNames:["d","l","m","m","j","v","s"],monthNames:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],abbreviatedMonthNames:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],amDesignator:"a.m.",pmDesignator:"p.m."},Window.prototype.popup=function(e,t,n,o){var i=null!=window.screenLeft?window.screenLeft:screen.left,r=null!=window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,l=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,s=a/2-n/2+i,c=l/2-o/2+r,d=window.open(e,t,"scrollbars=yes, width="+n+", height="+o+", top="+c+", left="+s);return window.focus&&d.focus(),d};var gAnalyticsKey="UA-3173634-23",gMapsKey="AIzaSyBctG1HrS4AvXGRIvOOSmrwZsazOlCqX8E",mainColor="#367FB6",animationEndSelector="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",tºsitionEndSelector="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",cmdList=function(e){var t='<div class="list-icons">\r\n<div class="dropdown">\r\n<a title="Acciones..." href="#" class="list-icons-item text-main" data-toggle="dropdown">\r\n<i class="icon-menu9"></i>\r\n</a>\r\n<div class="dropdown-menu dropdown-menu-right">\r\n';return void 0!==e.hideDetail&&e.hideDetail||(t+='<a href="#" title="Detalles..." class="dropdown-item cmd detail"><i class="icon-database-export"></i> Detalles</a>\r\n'),void 0!==e.hideReport&&e.hideReport||(t+='<a href="#" title="Reportar avance..." class="dropdown-item cmd report"><i class="icon-database-diff"></i> Avance</a>\r\n'),void 0!==e.hideEdit&&e.hideEdit||(t+='<a href="#" title="Editar..." class="dropdown-item cmd edit"><i class="icon-database-edit2"></i> Editar</a>\r\n'),void 0!==e.hideEnable&&e.hideEnable||(t+='<a href="#" title="Activar..." class="dropdown-item cmd enable"><i class="icon-database-check"></i> Activar</a>\r\n'),void 0!==e.hideDisable&&e.hideDisable||(t+='<a href="#" title="Desactivar..." class="dropdown-item cmd disable"><i class="icon-database-remove"></i> Desactivar</a>\r\n'),void 0!==e.hideDelete&&e.hideDelete||(t+='<a href="#" title="Eliminar..." class="dropdown-item cmd delete"><i class="icon-database-remove"></i> Eliminar</a>\r\n'),void 0!==e.append&&e.append.length>0&&(t+=e.append),t+"</div>\r\n</div>\r\n</div>"},address={protocol:window.location.protocol,host:window.location.host,path:window.location.pathname,port:window.location.port,origin:window.location.origin,hash:window.location.hash,href:window.location.href,path:function(){var e=window.location.href.split("/"),t=e[0]+"//"+e[2]+"/";return"/"+window.location.href.replace(t,"")},base_url:function(){var e=window.location.href.split("/");return e[0]+"//"+e[2]+"/"},param:function(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[null,""])[1].replace(/\+/g,"%20"))||null}},sendPost=function(e,t){var n=$("<form id='_frm' method='post' target='_blank'/>").appendTo("body");for(var o in n.attr("action",e),n.find("input").each(function(){$(this).remove()}),t)t.hasOwnProperty(o)&&n.prepend("<input type='hidden' name='"+o+"' value='"+t[o]+"'/>");n.submit().remove()};jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this};var _nolock=!0;$.fn.animateHighlight=function(e,t){var n=e||"#FFFF9C",o=t||1500,i=this.css("backgroundColor");_nolock&&(_nolock=!1,this.stop().css("background-color",n).animate({backgroundColor:i},o),setTimeout(function(){_nolock=!0},o))},jQuery.fn.getFrom=function(e){var t=$("<div>").append($(this).clone()).html().toString();for(var n in e)e.hasOwnProperty(n)&&(t=t.replace(new RegExp("{"+n.toString()+"}","g"),e[n]));return $(t)},jQuery.fn.removeClasses=function(e){return this.each(function(t,n){var o=n.className.split(" ").filter(function(t){return 0!==t.lastIndexOf(e,0)});n.className=$.trim(o.join(" "))}),this},jQuery.fn.autoOff=function(){return this.each(function(){var e=$(this),t=e.find("input[type='text']").filter(":visible");console.log(_sep+"autoOff() => Els: "+t.length),t.attr("autocomplete","off")})},jQuery.fn.disable=function(){return this.each(function(){var e=$(this);e.attr("readonly","true").attr("disabled","disabled"),"a"==this.tagName.toLowerCase()&&$(e).off("click");var t="input[type='text'],input[type='checkbox'],input[type='password'],input[type='radio'],select,textarea,a";e.find(t).each(function(e){$(this).disable()})})},jQuery.fn.enable=function(){return this.each(function(){var e=$(this);e.removeAttr("readonly").removeAttr("disabled"),"a"==this.tagName.toLowerCase()&&$(e).on("click");var t="input[type='text'],input[type='checkbox'],input[type='password'],input[type='radio'],select,textarea,a";e.find(t).each(function(e){$(this).enable()})})},jQuery.fn.outerHtml=function(){return $("<div>").append($(this).clone()).html().toString()},jQuery.fn.setValue=function(e){return this.each(function(){var t=window.jQuery(this),n=typeof e,o=this.type,i=this.tagName.toLowerCase();null===e?"text"===o||"password"===o||"textarea"===i?this.value="":"checkbox"===o||"radio"===o?this.checked=!1:"select"===i&&(this.selectedIndex=0):("file"===o?this.value="":"select"===i&&"0"===e.toString()?this.selectedIndex=0:"select"===i&&"boolean"===n?t.val(!0===e?"1":"0"):t.val(e),t.trigger("change"))})},jQuery.fn.dataFrom=function(e,t){window.jQuery(this).each(function(){if(void 0!==e){var n=window.jQuery(this);for(var o in e)if(e.hasOwnProperty(o))if(o.contains("$"))delete e[o];else{var i=e[o],r=n.find("#"+o);r.attr("id");if(void 0!==r&&r.length>0){r.setValue(i);var a=r[0].tagName.toLowerCase();if("select"===a&&r.change(),r.attr("disabled")&&r.removeAttr("disabled").attr("disabled","disabled"),(r.hasClass("numeric")||r.hasClass("numeric-decimal"))&&void 0!==window.jQuery.fn.autoNumeric&&r.val(window.jQuery.fn.autoNumeric.Format(r,r.val())),r.hasClass("masked")&&r.trigger("keyup"),r.hasClass("date_select")&&void 0!==window.jQuery.datepick.parseDate&&void 0!==window.jQuery.datepick.formatDate&&null!==i){var l=r.datepick("options").dateFormat;"date"!==type.of(i)&&(i=window.jQuery.datepick.parseDate("yyyy-mm-dd",i.left("T"))),console.log(i+", typeof: "+typeof i);var s=window.jQuery.datepick.formatDate(l,i);r.val(s)}}}}return Call(t,e)})},jQuery.fn.dataTo=function(e,t,n){if(n=void 0!==n&&n,void 0!==e){console.log(_sep+"jQuery.fn.dataTo\ncopyNulls: "+n);var o,i=window.jQuery(this);for(o in e)if(e.hasOwnProperty(o))if(o.contains("$"))delete e[o];else{var r=i.find("#"+o);if(r.length>0){var a=null!==r.val()&&r.val().trim().length>0,l=a?r.val():null;console.log(o+": "+l);var s=r[0].tagName.toLowerCase(),c=typeof e[o];"select"===s&&"boolean"===c&&(l=null!==l?"1"===l:null),(r.hasClass("numeric")||r.hasClass("numeric-decimal"))&&void 0!==window.jQuery.fn.autoNumeric&&(l=null!==l?window.jQuery.fn.autoNumeric.Strip(o):null),(r.hasAttr("data-mask-alias")||r.hasAttr("data-mask-alias"))&&void 0!==window.jQuery().inputmask&&(l=r.inputmask("unmaskedvalue"),"decimal"!==r.attr("data-mask-alias")&&"currency"!==r.attr("data-mask-alias")||(l=parseFloat(l.replaceAll(",","."))),"integer"===r.attr("data-mask-alias")&&(l=parseInt(l))),r.hasClass("date_select")&&void 0!==window.jQuery.datepick.parseDate&&(l=null!==l?window.jQuery.datepick.parseDate(r.datepick("options").dateFormat,l):null),null!==l?e[o]=l:n&&(e[o]=null)}}return"function"===type.of(t)?t(e):e}return"function"===type.of(t)?t(e):e},function(e,t){"use strict";function n(t,n){this.element=t,this.settings=e.extend({},i,n),this._defaults=i,this._name=o,this.init()}var o="selectSearch",i={url:null,data:"{}",source:{},inputLength:3,groupField:null,sortField:null,valueField:null,match:"contains",selectFormat:null,addAllow:!1,addText:"Ingrese un nuevo ótem...",placeHolder:"Seleccione...",textField:null,log:!1};e.extend(n.prototype,{init:function(){var t=this.element.tagName.toLowerCase();if("select"!==t)return this.log("El elemento '#"+e(this.element).attr("id")+"' no es un select!"),!1;var n=this;if(null!==this.settings.url){var o=this.settings.url,i=this.settings.data;e.ajax({data:i,url:o,success:function(e){n.build(e)}})}else this.build(this.settings.source);return!1},build:function(n){var o=e(this.element),i=null,r=null,a=this.settings.textField,l=this.settings.valueField,s=this.settings.groupField,c=this.settings.sortField;if(console.log("Source: "+JSON.stringify(n)),n=this.sort(n,null!==c?c:s),o.append("<option></option>"),this.settings.addAllow){var d=this.settings.addCallback;o.one("select2-opening",function(){var t=e(this).data("select2"),n=e(this).select2("container"),o=n.find("input.select2-input:first");o.keyup(function(n){var o=n.which;13===o&&(Call(d,e(this).val(),t),t.close(),n.preventDefault())})})}if(e.each(n,function(t,n){var c=n[l],d=n[a];if(null!==c&&null!==d){var u=e('<option value="'+n[l].toString()+'">'+n[a].toString()+"</option>");if(u.data("item",n),null!==s){var p=n[s].toString();p!==r&&(r=p,i=e('<optgroup label="'+r+'">'),o.append(i)),i.append(u)}else o.append(u)}}),void 0!==t.jQuery.fn.select2){var u={allowClear:!0,dropdownCssClass:"uppercase",placeholder:this.settings.placeHolder,matcher:"contains"===this.settings.match?this.matchContains:this.matchStart,minimumInputLength:this.settings.inputLength,escapeMarkup:function(e){return e}};this.settings.addAllow&&(u.formatNoMatches=function(){var e="No se encontraron resultados.<br /><span class='text-bold text-size-mini'>Presione 'ENTER' para crear el ótem...</span>";return e});var p=this.settings.selectFormat;null!==p&&(u.formatSelection=function(t){var n=p,o=e(t.element).data("item");for(var i in o)o.hasOwnProperty(i)&&(n=n.replace(new RegExp("{"+i+"}","g"),o[i]));return n}),o.select2(u)}},log:function(e){this.settings.log&&console.log("%c"+this._name+": "+e,"color:red; background-color:yellow")},onFocus:function(){console.log("FOCUS!");var t=e(this).data("select2");setTimeout(function(){t.opened()||t.open()},0)},matchStart:function(e,t){return 0===t.toUpperCase().indexOf(e.toUpperCase())},matchContains:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>-1},sort:function(e,t){return console.log(e),e.sort(function(e,n){var o=e[t],i=n[t];return o<i?-1:o>i?1:0})}}),e.fn[o]=function(t){return this.each(function(){e.data(this,"plugin_"+o)||e.data(this,"plugin_"+o,new n(this,t))})}}(jQuery,window,document),jQuery.fn.validatorReset=function(){var e=window.jQuery(this);console.log(_sep+"validatorReset('#"+e.attr("id")+"'):\n");var t="input[type='text'],input[type='hidden'],input[type='checkbox'],input[type='password'],input[type='radio'],select,textarea",n="form#frm-"+e.attr("id");return window.frm=$(n),0===window.frm.length&&(e.wrap("<form id='frm-"+e.attr("id")+"'></form>"),window.frm=$(n)),void 0!==window.validator&&window.validator.destroy(),console.log("window.frm",window.frm.attr("id")),window.frm.data("validator",null).unbind("validate").validate(),window.frm.find("label.error").remove(),window.frm.find(".error").removeClass("error"),window.frm.find(t).each(function(){var e=window.jQuery(this),t=this.type,n=this.tagName.toLowerCase();e.rules("remove"),e.removeAttr("tabindex"),"text"!==t&&"password"!==t&&"textarea"!==n||!e.hasAttr("maxlength")||(e.data("nmd-maxlength",e.attr("maxlength")),e.removeAttr("maxlength"))}),void 0!==window.validator&&window.validator.resetForm(),e},jQuery.fn.isValid=function(){window.jQuery.validator.setDefaults({ignore:[],onkeyup:!1,onfocusout:!1,focusCleanup:!0,focusInvalid:!0,errorClass:"error is-invalid",errorElementClass:"is-invalid",successClass:"valid",validClass:"valid",success:function(e){e.remove()},highlight:function(e,t){var n=$(e);if(n.addClass(t),"select"===e.tagName.toLowerCase()&&n.hasClass("select2")){var o=n.next();o.addClass(t)}},unhighlight:function(e,t){var n=$(e);if(n.removeClass(t),"select"===e.tagName.toLowerCase()&&n.hasClass("select2")){var o=n.next();o.removeClass(t)}},errorPlacement:function(e,t){e.insertBefore(t),t.parent("div").hasClass("form-icon")?t.parent("div").after(e):t.after(e)},invalidHandler:function(e,t){for(var n in console.log(_sep+"validator.invalidHandler:"),t.errorMap)console.log("%c"+n+" => "+t.errorMap[n],"background:yellow;color:red;font-weight:bold;")}});var e=(new Date).TS(),t=window.jQuery(this);t.validatorReset(),t.find(".error").removeClass("error");var n="input[type='text'],input[type='hidden'],input[type='checkbox'],input[type='password'],input[type='radio'],select,textarea",o=t.find(n).filter("[id]");console.log(_sep+"jQuery.fn.isValid('#"+t.attr("id")+"'):\n"),o.each(function(t){var n=this.type,o=window.jQuery(this),i=this.tagName.toLowerCase(),r=!o.hasAttr("nonrequired")&&!o.attr("id").contains("autogen"),a="#"+o.attr("id")+", cumple: "+r+", visible: "+o.is(":visible")+", required: "+(void 0===o.attr("nonrequired"))+", autogen: "+o.attr("id").contains("autogen");if(console.log(a),null!=o&&void 0!==o.rules&&null!==o.rules&&o.rules("remove"),r){var l,s=o.attr("id"),c=s+"-"+e;if(console.log("ID temporal: "+c),o.attr("nmd-id",s).attr("id",c).attr("name",c).attr("tabindex",t+1),"hidden"===n&&o.hasAttr("required")?o.rules("add",{required:!0}):"text"!==n&&"password"!==n&&"textarea"!==i||!o.hasDataAttr("nmd-maxlength")||(o.attr("maxlength",o.data("nmd-maxlength")),o.removeData("maxlength")),"select"===this.tagName.toLowerCase()&&o.attr("multiple"))o.rules("add",{hasOptions:!0});else if(o.hasAttr("equalsTo")){var d="#"+o.attr("equalsTo")+"-"+e;l=window.jQuery(d),l.hasAttr("nonrequired")&&!l.hasValue()||o.rules("add",{equalTo:d})}else if(o.hasAttr("validateif"))l=window.jQuery("#"+o.attr("validateif")),o.rules("add",{required:function(){return l.val().trim().length>0}});else if(o.hasAttr("atleast"))o.rules("add",{atL:o.attr("atleast"),messages:{atL:"Al menos "+o.attr("atleast").split("|")[0]+" requerido"}});else if(o.hasAttr("sum"))o.rules("add",{sum:o.attr("sum")});else if(o.hasAttr("email"))o.rules("add",{email:!0,required:!0});else if(o.hasAttr("minlength"))console.log("minlength!"),o.rules("add",{minlength:o.attr("minlength"),required:!0});else if(o.hasAttr("checkuser"))o.rules("add",{checkuser:!0,required:!0});else if(o.hasAttr("minStrict"))o.rules("add",{minStrict:parseInt(o.attr("minStrict"))});else if(o.hasAttr("onAny")){var u={required:"Alguno requerido"};l=window.jQuery("#"+o.attr("onAny")),l.length>0&&o.rules("add",{required:function(){var e=void 0!==o.val()&&o.val().trim().length>0,t=void 0!==l.val()&&l.val().trim().length>0;return e||t?(l.rules("add",{required:!1}),!1):(l.rules("add",{required:!0,messages:u}),!0)},messages:u})}else if(o.hasAttr("dependsOn")){var p=window.jQuery("#"+o.attr("dependson")+"-"+e);o.rules("add",{required:function(){return!p.hasAttr("nonrequired")&&(void 0!==p.val()&&p.val().trim().length>0)}})}else o.rules("add",{required:!0})}});var i=window.frm.valid();if(!i){var r=null,a=t.find("input.error:hidden");if(console.log(_sep+"Forma no válida!\nparentEl: #"+t.attr("id")+"\nhiddens.length: "+a.length),a.each(function(e){var t=$(this),n=t.parents("div.form-group.file:first"),o=n.find("div.file-caption:first");null===r&&(r=o),console.log("div: "+o.attr("class")),o.addClass("error")}),void 0!==window.jQuery.scrollTo){console.log(_sep+"scrollTo en validation!");var l=t.find(".error:first");void 0!==l&&l.length>0&&("hidden"===l.attr("type")?l=r:"select"===l[0].tagName.toLowerCase()&&l.hasClass("select2")&&(l=l.next()),window.jQuery.scrollTo(l,{duration:500,offset:-100}))}}return o.each(function(e){var t=window.jQuery(this);if(t.hasAttr("nmd-id")){var n=t.attr("nmd-id");t.attr("id",n).attr("name",n).removeAttr("nmd-id")}}),console.log(_sep+"ES VÁLIDA: "+i),i},jQuery.fn.hasValue=function(){return $(window.jQuery(this)).filter(function(){return $(this).val()}).length>0},jQuery.fn.hasAttr=function(e){var t=window.jQuery(this).attr(e);return void 0!==t&&!1!==t},jQuery.fn.hasDataAttr=function(e){return void 0!==window.jQuery(this).data(e)&&null!==window.jQuery(this).data(e)},jQuery.fn.clear=function(e){return this.each(function(){var t=window.jQuery(this).find("label.error");t.remove();var n=window.jQuery(this).find(".dx-invalid");n.each(function(e){let t=$(this);t.removeClass("dx-invalid")}),n=window.jQuery(this).find("input, textarea, select"),n.each(function(t){let n=$(this);n.removeClass("error"),n.removeClass("error"),n.removeClass("is-invalid");var o=this.type,i=this.tagName.toLowerCase();"hidden"===o&&void 0!==e&&e?this.value="":"text"===o||"password"===o||"textarea"===i?this.value="":"checkbox"===o||"radio"===o?this.checked=!1:"select"===i&&(this.selectedIndex=0),n.trigger("change")})})};var is={Null:function(e){return null===e},Undefined:function(e){return void 0===e},nt:function(e){return null==e},Function:function(e){return"function"==typeof e&&null!==e.constructor.toString().match(/Function/)},String:function(e){return"string"==typeof e||"object"==typeof e&&null!==e.constructor.toString().match(/string/i)},Array:function(e){return"object"==typeof e&&(null!==e.constructor.toString().match(/array/i)||void 0!==e.length)},Boolean:function(e){return"boolean"==typeof e||"object"==typeof e&&null!==e.constructor.toString().match(/boolean/i)},Date:function(e){return"object"==typeof e&&null!==e.constructor.toString().match(/date/i)},HTML:function(e){return"object"==typeof e&&null!==e.constructor.toString().match(/html/i)},Number:function(e){return"number"==typeof e||"object"==typeof e&&null!==e.constructor.toString().match(/Number/)},Object:function(e){return"object"==typeof e&&null!==e.constructor.toString().match(/object/i)},RegExp:function(e){return"function"==typeof e&&null!==e.constructor.toString().match(/regexp/i)}},type={of:function(e){for(var t in is)if(is.hasOwnProperty(t)&&is[t](e))return t.toLowerCase()}};$(window).resize(function(){window.vpWidth=parseInt($(window).width()),window.vpHeight=parseInt($(window).height());var e=$("body");vpWidth<768&&(e.hasClass("device-xs")?vpWidth>=768&&vpWidth<992&&(e.hasClass("device-sm")?vpWidth>=992&&vpWidth<1200&&(e.hasClass("device-md")?vpWidth>=1200&&(e.hasClass("device-lg")||(window.device="lg",e.removeClasses("device-"),e.addClass("device-lg"))):(window.device="md",e.removeClasses("device-"),e.addClass("device-md"))):(window.device="sm",e.removeClasses("device-"),e.addClass("device-sm"))):(window.device="xs",e.removeClasses("device-"),e.addClass("device-xs")))});var substringMatcher=function(e){return function(t,n){var o=[],i=new RegExp(t,"i");window.jQuery.each(e,function(e,t){i.test(t)&&o.push({value:t})}),n(o)}};window.jQuery.fn.lock=function(e,t,n=!0){var o=$(this[0]),i=o.attr("id");if(void 0===i){var r=(new Date).TS();i="lock-"+r,o.attr("id",i)}void 0===window._locks&&(window._locks=[]),console.log(_sep+"lock() start: "+JSON.stringify(window._locks)),null===e&&(e="Procesando, un momento por favor..."),
e='<div class="font-weight-semibold block-ui">'+(n?'<i class="fa fa-spinner"></i>':"")+'<span class="msg'+(n?"":" mt-0")+'">'+e+'<span class="font-size-sm">&hellip;</span></span></div>';var a={message:e,overlayCSS:{backgroundColor:"#fff",opacity:.95,cursor:"wait"},css:{border:0,padding:0,backgroundColor:"transparent",width:"100%"},onBlock:function(){return Call(t)}};if(this[0]===window)return $.blockUI(a),this;window._locks.contains("#"+i)?(console.log("lock("+i+") existe: "+JSON.stringify(window._locks)),$("div.blockMsg").html(e),Call(t)):(window._locks.add("#"+i),console.log("lock() end: "+JSON.stringify(window._locks)),o.block(a))},window.jQuery.fn.unlock=function(e){if(void 0!==window._locks&&window._locks.length>0){var t={onUnblock:function(){return Call(e)}};if(this[0]===window)return $.unblockUI(t),this;this.each(function(){var e=$(this);e.unblock(t);var n=e.attr("id");window._locks.remove("#"+n),n.contains("lock-")&&e.removeAttr("id"),console.log("unlock(): "+JSON.stringify(window._locks))})}},window.jQuery.fn.unlockAll=function(e){console.log(_sep+"unlockAll:\nwindow._locks:"+window._locks),$.each(window._locks,function(e,t){$(t).unlock()})};var DataTableColumns=function(e,t){var n,o=[];Object.keys(e).length;for(n in e)e.hasOwnProperty(n)&&o.push({visible:!1,data:n.toString(),searchable:!1,orderable:!1});return $.each(o,function(e,n){$.each(t,function(e,t){if(n.data===t.data)return console.log("Match!: "+n.data),o[e]=t,!1})}),o};jQuery.fn.setUpload=function(e){return this.each(function(){if(void 0!==window.jQuery().fileinput){var t=$(this),n=t.attr("id"),o=t.parents("div.form-group.file:first");if(o.length>0){console.log("setUpload: "+n);var i='<label>{label}</label>\n<input type="hidden" name="{name}Size" id="{name}Size">\n<input type= "hidden" name= "{name}Ext" id= "{name}Ext">\n<input type="file" nonrequired="true" placeholder="{placeholder}" id="{name}" name="{name}" filename="{filename}"><div class="input-group" id="{name}Group">\n<input class="form-control" id="{name}Name" name="{name}Name" type="text"><span class="input-group-btn"><button class="btn btn btn-primary btn-icon reload" type="button" title="Cambiar archivo..."><i class="icon-reload-alt"></i></button><button class="btn btn btn-primary btn-icon link" type="button" title="Observar archivo..."><i class="icon-link2"></i></button></span></div><div id="{name}Error" class="label label-block label-danger error">&nbsp;</div><input type="hidden" name="{name}Hidden" id="{name}Hidden"/>',r={language:"es",browseLabel:"",removeLabel:"",uploadLabel:"",showCaption:!0,showPreview:!1,showUpload:!1,maxFileSize:window._mrl,removeClass:"btn btn-icon",elErrorContainer:"#"+n+"Error",initialCaption:"Seleccione un archivo...",browseClass:"btn btn-primary btn-icon",uploadClass:"btn btn-default btn-icon",browseIcon:'<i class="icon-plus22"></i> ',uploadIcon:'<i class="icon-file-upload"></i> ',removeIcon:'<i class="icon-cancel-square"></i> ',uploadUrl:"undefined"!==e.url?e.url:null,allowedFileExtensions:"undefined"!==e.ext?e.ext:null,msgInvalidFileExtension:'Sólo se permiten archivos de tipo "{extensions}".',msgSizeTooLarge:"El archivo es muy pesado ({customSize}), se permiten archivos de {customMaxSize} como móximo.",layoutTemplates:{caption:'<div tabindex="-1" class="form-control file-caption {class}">\n<span class="icon-file-plus kv-caption-icon"></span><div class="file-caption-name"></div>\n</div>'}},a=i.replaceAll("{name}",n).replaceAll("{placeholder}",t.attr("placeholder")).replaceAll("{label}",t.attr("label"));void 0!==t.attr("filename")&&(a=a.replaceAll("{filename}",t.attr("filename"))),t.replaceWith(a);var l=o.find("input[type='file']:first");l.length>0&&(l.data("parent",o),null!==r.allowedFileExtensions&&l.attr("accept","."+r.allowedFileExtensions.join(",.")),l.on("fileuploaderror",function(e,t,i){o.find("div.file-caption:first").removeClass("error"),o.find("label.error").remove();t.files[0];var r=t.files[0].name,a=t.files[0].size,l=1024*$(this).data().fileinput.maxFileSize;o.find("#"+n+"Hidden").val(r),i=i.replace("{customSize}",a.sizeFormat()),i=i.replace("{customMaxSize}",l.sizeFormat()),console.log("fileuploaderror => "+i),o.find('li[data-file-id="'+t.id+'"]').html(i)}).on("filebatchselected",function(e,t){if(o.find("div.file-caption:first").removeClass("error"),o.find("label.error").remove(),t.length>0){var i=t[0],r=i.name,a=o.find("span.kv-caption-icon:first"),l=r+" ("+i.size.sizeFormat()+")";a.removeClasses("icon-file-").addClass(i.name.getIcon()),o.find("div.file-caption-name:first").text(l),o.find("#"+n+"Hidden").val(r),console.log("filebatchselected => id: "+n+", "+l)}}).on("fileerror",function(e,t,n){console.log("fileerror")}).on("filebatchuploaderror",function(e,t,n,o){console.log("filebatchuploaderror")}).on("filecleared",function(e){o.find("div.file-caption:first").removeClass("error"),o.find("label.error").remove(),o.removeClass("has-error"),console.log("filecleared"),o.find("#"+n+"Hidden").val(""),o.find("div.file-caption-name:first").text("Seleccione un archivo...")}).fileinput(r))}}})},$().ready(function(){void 0!==window.swal&&(console.log(_sep+"swal init"),window.swal.setDefaults({reverseButtons:!0,cancelButtonClass:"btn btn-main",confirmButtonClass:"btn btn-main",allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,width:"500px"}),window.msg={_defaults:{animation:!0,allowOutsideClick:!1,showCancelButton:!1,showCloseButton:!1,showConfirmButton:!1,onOpen:function(e){$(".sweet-alert").css({padding:"20px"}),$(".sweet-alert .sa-error-container").show(),$(".sweet-alert .sa-button-container").show(),$(".sweet-alert p:first").show()}},_open:function(){console.log("window.msg._open();")},_close:function(){console.log("window.msg._close();")},close:function(){window.swal.isVisible()&&(window.msg._close(),window.swal.close())},process:function(e){window.msg._open(),null===e&&(e="Procesando, un momento por favor"),e='<i class="icon-spinner2 spinner"></i><span class="msg">'+e+'<span class="font-size-sm">…</span></span>';var t=Clone(window.msg._defaults);t.type=null,t.title=e,t.html=null,t.onOpen=function(e){console.log(e)},t.onClose=function(e,t,n){window.msg._close()},window.swal(t)},show:function(e,t,n){return window.swal({html:!0,title:e,animation:!0,showCancelButton:!1,showConfirmButton:!1,onOpen:function(e){console.log(e),$(".sweet-alert").css({padding:"10px"}),$(".sweet-alert .sa-error-container").hide(),$(".sweet-alert .sa-button-container").hide(),$(".sweet-alert p:first").hide(),window.msg._open(),Call(t)},onClose:function(){$(".sweet-alert").css({padding:"20px"}),$(".sweet-alert .sa-error-container").show(),$(".sweet-alert .sa-button-container").show(),$(".sweet-alert p:first").show(),window.msg._close(),Call(n)}})},error:function(e,t,n){window.msg._open();var o=window.msg._defaults;o.type="error",o.showCancelButton=!1,o.showConfirmButton=!0,o.confirmButtonText="ENTENDIDO",o.html="string"==typeof t?t:"",o.title=e.hasOwnProperty("message")?e.message:e,o.onClose=function(){window.msg._close(),Call(n)},window.swal(o)},success:function(e,t,n){window.msg._open();var o=window.msg._defaults;o.type="success",o.showCancelButton=!1,o.showConfirmButton=!0,o.confirmButtonText="ENTENDIDO",o.html="string"==typeof t?t:"",o.title=e.hasOwnProperty("message")?e.message:e,o.onClose=function(){window.msg._close(),Call(n)},window.swal(o)},notice:function(e,t,n){window.swal({title:e,text:t,html:!0,type:"error",showCancelButton:!1,confirmButtonText:"ENTENDIDO"},function(e){window.msg._close(),Call(n)})},confirm:function(e){window.msg._open();var t=Clone(window.msg._defaults);t.showConfirmButton=!0,t.showCancelButton=!0,t.type=void 0!==e.type&&null!==e.type?e.type:"question",t.confirmButtonText=void 0!==e.textOk&&null!==e.textOk?e.textOk:"ENTENDIDO <i class='icon-database-insert'></i>",t.cancelButtonText=void 0!==e.textCancel&&null!==e.textCancel?e.textCancel:"<i class='icon-database-remove'></i> CANCELAR",t.html="string"==typeof e.text?e.text:"",t.title=void 0!==e.title&&null!==e.title?e.title:"",t.onClose=function(e,t,n){window.msg._close()},window.swal(t).then(t=>{Call(t.value?e.onConfirm:e.onCancel)})}})});